<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - LoveConnect</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --primary-color: #ff4d6d;
      --secondary-color: #ff8fa3;
      --light-color: #fff0f3;
      --dark-color: #2b2d42;
      --accent-color: #ffb3c1;
      --white: #ffffff;
      --black: #000000;
      --border-radius: 12px;
      --box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      --success-color: #4caf50;
      --warning-color: #ff9800;
      --info-color: #2196f3;
      --error-color: #f44336;
    }
    
    body {
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--light-color);
      color: var(--dark-color);
    }
    
    .dashboard-container {
      display: flex;
      min-height: 100vh;
    }
    
    .sidebar {
      width: 280px;
      background: var(--dark-color);
      color: var(--white);
      padding: 25px;
      box-shadow: 2px 0 15px rgba(0,0,0,0.1);
      position: relative;
      z-index: 10;
      transition: all 0.3s ease;
    }
    
    .sidebar.collapsed {
      width: 80px;
      overflow: hidden;
    }
    
    .sidebar.collapsed .sidebar-header h3,
    .sidebar.collapsed .user-info,
    .sidebar.collapsed .nav-link span {
      display: none;
    }
    
    .sidebar.collapsed .sidebar-header {
      justify-content: center;
    }
    
    .sidebar.collapsed .user-profile {
      justify-content: center;
      padding: 10px;
    }
    
    .sidebar.collapsed .nav-link {
      justify-content: center;
      padding: 15px;
    }
    
    .sidebar.collapsed .nav-link i {
      margin-right: 0;
      font-size: 18px;
    }
    
    .sidebar-header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      position: relative;
    }
    
    .sidebar-header img {
      width: 40px;
      margin-right: 12px;
      transition: all 0.3s ease;
    }
    
    .sidebar-header h3 {
      font-size: 22px;
      font-weight: 700;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
      transition: all 0.3s ease;
    }
    
    .toggle-sidebar {
      position: absolute;
      right: -12px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--white);
      border: 2px solid var(--dark-color);
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 20;
    }
    
    .toggle-sidebar i {
      font-size: 12px;
      color: var(--dark-color);
      transition: all 0.3s ease;
    }
    
    .sidebar.collapsed .toggle-sidebar i {
      transform: rotate(180deg);
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      padding: 15px;
      border-radius: var(--border-radius);
      background: rgba(255,255,255,0.1);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }
    
    .user-profile:hover {
      background: rgba(255,255,255,0.2);
      transform: translateY(-2px);
    }
    
    .user-profile.online::after {
      content: '';
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 12px;
      height: 12px;
      background-color: var(--success-color);
      border-radius: 50%;
      border: 2px solid var(--dark-color);
    }
    
    .sidebar.collapsed .user-profile.online::after {
      bottom: 5px;
      right: 5px;
    }
    
    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      margin-right: 15px;
      object-fit: cover;
      border: 2px solid var(--primary-color);
      transition: all 0.3s ease;
    }
    
    .sidebar.collapsed .user-avatar {
      margin-right: 0;
    }
    
    .user-info {
      transition: all 0.3s ease;
    }
    
    .user-info h4 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
    }
    
    .user-info p {
      margin: 0;
      font-size: 13px;
      color: var(--accent-color);
    }
    
    .nav-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .nav-item {
      margin-bottom: 8px;
      position: relative;
    }
    
    .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      color: var(--light-color);
      text-decoration: none;
      border-radius: var(--border-radius);
      transition: all 0.3s ease;
      font-size: 15px;
      position: relative;
    }
    
    .nav-link:hover, .nav-link.active {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: var(--white);
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
    }
    
    .nav-link i {
      margin-right: 12px;
      width: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .new-message {
      display: none;
      width: 8px;
      height: 8px;
      background-color: var(--primary-color);
      border-radius: 50%;
      margin-left: 8px;
    }
    
    .main-content {
      flex: 1;
      padding: 25px;
      background-color: var(--light-color);
      transition: all 0.3s ease;
    }
    
    .sidebar.collapsed ~ .main-content {
      margin-left: 0;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .search-bar {
      display: flex;
      align-items: center;
      background: var(--white);
      padding: 10px 20px;
      border-radius: 30px;
      box-shadow: var(--box-shadow);
      width: 350px;
      transition: all 0.3s ease;
    }
    
    .search-bar:focus-within {
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.2);
    }
    
    .search-bar input {
      border: none;
      outline: none;
      flex: 1;
      padding: 5px;
      font-size: 14px;
      background: transparent;
    }
    
    .search-bar i {
      color: var(--primary-color);
      margin-right: 10px;
    }
    
    .user-actions {
      display: flex;
      align-items: center;
    }
    
    .notification-btn, .logout-btn {
      background: none;
      border: none;
      cursor: pointer;
      margin-left: 15px;
      font-size: 18px;
      color: var(--dark-color);
      position: relative;
      transition: all 0.3s ease;
    }
    
    .notification-btn:hover {
      color: var(--primary-color);
      transform: scale(1.1);
    }
    
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .logout-btn {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: var(--white);
      padding: 8px 20px;
      border-radius: 30px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
      transition: all 0.3s ease;
    }
    
    .logout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 77, 109, 0.4);
    }
    
    .logout-btn i {
      margin-right: 8px;
    }
    
    .dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .card {
      background: var(--white);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
      transition: all 0.3s ease;
      cursor: pointer;
      border: 1px solid rgba(255, 77, 109, 0.1);
      position: relative;
      overflow: hidden;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(255, 77, 109, 0.15);
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-title {
      margin: 0;
      font-size: 15px;
      color: #666;
      font-weight: 500;
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 77, 109, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-color);
    }
    
    .card-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--primary-color);
      margin: 10px 0;
    }
    
    .card-footer {
      font-size: 13px;
      color: #999;
      display: flex;
      align-items: center;
    }
    
    .card-footer i {
      color: var(--primary-color);
      margin-right: 5px;
    }
    
    .matches-section {
      display: flex;
      flex-direction: column;
      margin-bottom: 30px;
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-title {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
      color: var(--dark-color);
    }
    
    .view-all {
      color: var(--primary-color);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    .view-all:hover {
      transform: translateX(3px);
    }
    
    .view-all i {
      margin-left: 5px;
    }
    
    .matches-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
    }
    
    .match-card {
      background: var(--white);
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--box-shadow);
      transition: all 0.3s ease;
      position: relative;
      cursor: pointer;
    }
    
    .match-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(255, 77, 109, 0.2);
    }
    
    .match-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: all 0.5s ease;
    }
    
    .match-card:hover .match-image {
      transform: scale(1.05);
    }
    
    .match-info {
      padding: 15px;
    }
    
    .match-name {
      margin: 0 0 5px 0;
      font-size: 16px;
      font-weight: 600;
    }
    
    .match-details {
      margin: 0;
      font-size: 13px;
      color: #666;
      display: flex;
      align-items: center;
    }
    
    .match-details i {
      color: var(--primary-color);
      margin-right: 5px;
      font-size: 12px;
    }
    
    .match-status {
      position: absolute;
      top: 15px;
      right: 15px;
      background: var(--primary-color);
      color: white;
      padding: 4px 10px;
      border-radius: 30px;
      font-size: 11px;
      font-weight: 500;
    }
    
    /* Compatibility Indicator */
    .compatibility-bar {
      height: 4px;
      background: #eee;
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .compatibility-level {
      height: 100%;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      border-radius: 2px;
    }
    
    /* Activity Feed Section */
    .activity-feed {
      background: var(--white);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
      margin-bottom: 30px;
    }
    
    .activity-item {
      display: flex;
      padding: 15px 0;
      border-bottom: 1px solid #eee;
      align-items: flex-start;
    }
    
    .activity-item:last-child {
      border-bottom: none;
    }
    
    .activity-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 15px;
      object-fit: cover;
      border: 2px solid var(--accent-color);
    }
    
    .activity-content {
      flex: 1;
    }
    
    .activity-text {
      margin: 0;
      font-size: 14px;
    }
    
    .activity-text a {
      color: var(--primary-color);
      font-weight: 600;
      text-decoration: none;
    }
    
    .activity-time {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
      display: flex;
      align-items: center;
    }
    
    .activity-time i {
      margin-right: 5px;
      font-size: 10px;
    }
    
    /* Premium Features Section */
    .premium-section {
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      border-radius: var(--border-radius);
      padding: 25px;
      margin-bottom: 30px;
      color: white;
      position: relative;
      overflow: hidden;
      box-shadow: var(--box-shadow);
    }
    
    .premium-section::before {
      content: '';
      position: absolute;
      top: -50px;
      right: -50px;
      width: 200px;
      height: 200px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
    }
    
    .premium-section::after {
      content: '';
      position: absolute;
      bottom: -80px;
      right: -30px;
      width: 200px;
      height: 200px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
    }
    
    .premium-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }
    
    .premium-title {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
    }
    
    .premium-badge {
      background: linear-gradient(to right, #ffd166, #f7b801);
      color: var(--dark-color);
      padding: 3px 10px;
      border-radius: 30px;
      font-size: 11px;
      font-weight: 600;
      margin-left: 8px;
      display: inline-block;
    }
    
    .premium-features {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      position: relative;
      z-index: 1;
    }
    
    .premium-feature {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .premium-feature i {
      margin-right: 10px;
      font-size: 18px;
      color: white;
      background: rgba(255,255,255,0.2);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .premium-feature-text {
      font-size: 14px;
    }
    
    .upgrade-btn {
      background: white;
      color: var(--primary-color);
      border: none;
      padding: 10px 25px;
      border-radius: 30px;
      font-weight: 600;
      margin-top: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .upgrade-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    
    .upgrade-btn i {
      margin-left: 8px;
    }
    
    /* Personality Traits */
    .traits-section {
      margin-bottom: 30px;
    }
    
    .trait-item {
      margin-bottom: 15px;
    }
    
    .trait-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }
    
    .trait-name {
      font-size: 14px;
      font-weight: 500;
      margin: 0;
    }
    
    .trait-value {
      font-size: 14px;
      color: #666;
    }
    
    .trait-bar {
      height: 8px;
      background: #eee;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .trait-level {
      height: 100%;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      border-radius: 4px;
    }
    
    /* Chat Container Styles */
    .chat-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      background: white;
      border-radius: var(--border-radius);
      box-shadow: 0 5px 25px rgba(0,0,0,0.15);
      z-index: 1000;
      display: none;
      flex-direction: column;
      overflow: hidden;
      transform: translateY(20px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .chat-container.visible {
      display: flex;
      transform: translateY(0);
      opacity: 1;
    }
    
    .chat-header {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    
    .chat-header h3 {
      margin: 0;
      font-size: 16px;
      display: flex;
      align-items: center;
    }
    
    .chat-header h3 img {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      margin-right: 10px;
      border: 2px solid white;
    }
    
    .chat-close {
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
    }
    
    .chat-messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      max-height: 300px;
      background: #f9f9f9;
    }
    
    .message {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
    }
    
    .message-sent {
      align-items: flex-end;
    }
    
    .message-received {
      align-items: flex-start;
    }
    
    .message-bubble {
      max-width: 70%;
      padding: 10px 15px;
      border-radius: 18px;
      margin-bottom: 5px;
      position: relative;
      word-wrap: break-word;
    }
    
    .sent {
      background: var(--primary-color);
      color: white;
      border-top-right-radius: 5px;
    }
    
    .received {
      background: #e5e5ea;
      color: black;
      border-top-left-radius: 5px;
    }
    
    .message-time {
      font-size: 11px;
      color: #999;
    }
    
    .chat-input {
      display: flex;
      padding: 15px;
      background: white;
      border-top: 1px solid #eee;
    }
    
    .chat-input input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 30px;
      outline: none;
      font-size: 14px;
    }
    
    .chat-input button {
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin-left: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .chat-input button:hover {
      background: var(--secondary-color);
      transform: scale(1.05);
    }
    
    /* Chat Toggle Button */
    .chat-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 5px 20px rgba(255, 77, 109, 0.4);
      cursor: pointer;
      z-index: 999;
      transition: all 0.3s ease;
    }
    
    .chat-toggle:hover {
      transform: scale(1.1) rotate(10deg);
    }
    
    .chat-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: white;
      color: var(--primary-color);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border: 2px solid var(--primary-color);
    }
    
    /* Notification Panel */
    .notification-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 350px;
      height: 100vh;
      background: white;
      box-shadow: -5px 0 15px rgba(0,0,0,0.1);
      z-index: 1001;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    .notification-panel.open {
      right: 0;
    }
    
    .notification-header {
      padding: 20px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .notification-title {
      margin: 0;
      font-size: 18px;
    }
    
    .notification-close {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
    }
    
    .notification-content {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
    }
    
    .notification-item {
      padding: 15px 0;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .notification-item:hover {
      background: rgba(255, 77, 109, 0.05);
    }
    
    .notification-item.unread {
      background: rgba(255, 77, 109, 0.05);
      position: relative;
    }
    
    .notification-item.unread::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: var(--primary-color);
    }
    
    .notification-text {
      margin: 0;
      font-size: 14px;
    }
    
    .notification-time {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }
    
    .notification-actions {
      padding: 15px;
      border-top: 1px solid #eee;
      text-align: center;
    }
    
    .mark-all-read {
      color: var(--primary-color);
      background: none;
      border: none;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      margin: 0 auto;
    }
    
    .mark-all-read i {
      margin-right: 5px;
    }
    
    /* Dark overlay for notifications */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      display: none;
    }
    
    .overlay.active {
      display: block;
    }
    
    /* Personality Insights Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1100;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: white;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 5px 30px rgba(0,0,0,0.3);
      animation: modalFadeIn 0.3s ease;
    }
    
    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      margin: 0;
      font-size: 20px;
      color: var(--dark-color);
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #999;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .insight-item {
      margin-bottom: 20px;
    }
    
    .insight-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--dark-color);
    }
    
    .insight-text {
      font-size: 14px;
      line-height: 1.6;
      color: #555;
    }
    
    .modal-footer {
      padding: 15px 20px;
      border-top: 1px solid #eee;
      text-align: right;
    }
    
    .modal-btn {
      padding: 8px 20px;
      border-radius: 30px;
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .modal-btn-primary {
      background: var(--primary-color);
      color: white;
    }
    
    .modal-btn-primary:hover {
      background: var(--secondary-color);
    }
    
    /* Floating action button */
    .fab {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
      cursor: pointer;
      z-index: 998;
      transition: all 0.3s ease;
    }
    
    .fab:hover {
      transform: scale(1.1) rotate(15deg);
    }
    
    /* Loading animation */
    .loader {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--secondary-color);
    }
    
    /* Animation for new matches */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .new-match {
      animation: pulse 1.5s infinite;
    }
    
    /* Verification badge */
    .verified-badge {
      display: inline-block;
      color: var(--success-color);
      margin-left: 5px;
      font-size: 12px;
    }
    
    /* Responsive adjustments */
    @media (max-width: 1200px) {
      .sidebar {
        width: 240px;
        padding: 20px;
      }
      
      .matches-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      }
      
      .chat-container {
        width: 300px;
      }
      
      .notification-panel {
        width: 300px;
      }
    }
    
    @media (max-width: 992px) {
      .dashboard-cards {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .premium-features {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      .dashboard-container {
        flex-direction: column;
      }
      
      .sidebar {
        position: fixed;
        width: 100%;
        height: auto;
        z-index: 1000;
      }
      
      .sidebar.collapsed {
        width: 60px;
        height: 60px;
        overflow: hidden;
        border-radius: 0 0 30px 0;
      }
      
      .sidebar.collapsed ~ .main-content {
        margin-top: 60px;
      }
      
      .main-content {
        margin-left: 0;
        padding-top: 20px;
      }
      
      .header {
        position: sticky;
        top: 0;
        background: var(--light-color);
        z-index: 100;
        padding: 15px 0;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .search-bar {
        width: 100%;
        margin-bottom: 15px;
      }
      
      .user-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .matches-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .chat-container {
        width: 100%;
        bottom: 0;
        right: 0;
        border-radius: var(--border-radius) var(--border-radius) 0 0;
      }
      
      .chat-toggle {
        bottom: 80px;
      }
      
      .fab {
        bottom: 140px;
      }
    }
    
    @media (max-width: 576px) {
      .dashboard-cards {
        grid-template-columns: 1fr;
      }
      
      .matches-grid {
        grid-template-columns: 1fr;
      }
      
      .match-card {
        display: flex;
        flex-direction: row;
        height: 120px;
      }
      
      .match-image {
        width: 120px;
        height: 100%;
      }
      
      .premium-features {
        grid-template-columns: 1fr;
      }
      
      .notification-panel {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .match-card {
        height: 100px;
      }
      
      .match-image {
        width: 100px;
      }
      
      .match-info {
        padding: 10px;
      }
      
      .match-name {
        font-size: 14px;
      }
      
      .match-details {
        font-size: 12px;
      }
      
      .activity-avatar {
        width: 32px;
        height: 32px;
        margin-right: 10px;
      }
      
      .activity-text {
        font-size: 13px;
      }
      
      .activity-time {
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSsDjhJpEva6yMRfaf776RK2wKD8DIELzh6vP0nFtzhXGFi-zYBt1B-MwlHOIjdLmhhwkk&usqp=CAU"
          alt="LoveConnect Logo"
          style="width: 90px; height: auto; border: 3px solid #000; border-radius: 10px;">
        <h3>LoveConnect</h3>
        <div class="toggle-sidebar" id="toggleSidebar">
          <i class="fas fa-chevron-left"></i>
        </div>
      </div>
      
      <div class="user-profile online">
        <img src="https://i.imgur.com/JqYeYnN.jpg" alt="User Avatar" class="user-avatar" id="userAvatar">
        <div class="user-info">
          <h4 id="userName">Alex Johnson <span class="premium-badge">PREMIUM</span></h4>
          <p id="userEmail">New York, 28</p>
        </div>
      </div>
      
      <ul class="nav-menu">
        <li class="nav-item"><a href="#" class="nav-link active"><i class="fas fa-home"></i> <span>Dashboard</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-heart"></i> <span>Matches</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link" id="messagesLink"><i class="fas fa-comment-dots"></i> <span>Messages</span> <span class="new-message"></span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-search"></i> <span>Discover</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-user-friends"></i> <span>Likes</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-chart-line"></i> <span>Activity</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-gem"></i> <span>Premium</span></a></li>
      </ul>
    </div>
    
    <div class="main-content">
      <div class="header">
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search matches..." id="searchInput">
        </div>
        
        <div class="user-actions">
          <button class="notification-btn" id="notificationBtn">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </button>
          <button class="logout-btn" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        </div>
      </div>
      
      <div class="dashboard-cards">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">New Matches</h3>
            <div class="card-icon">
              <i class="fas fa-heart"></i>
            </div>
          </div>
          <div class="card-value" id="newMatches">12</div>
          <div class="card-footer"><i class="fas fa-arrow-up"></i> 3 new today</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Messages</h3>
            <div class="card-icon">
              <i class="fas fa-comments"></i>
            </div>
          </div>
          <div class="card-value" id="unreadMessages">5</div>
          <div class="card-footer"><i class="fas fa-circle"></i> 2 unread</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Profile Views</h3>
            <div class="card-icon">
              <i class="fas fa-eye"></i>
            </div>
          </div>
          <div class="card-value" id="profileViews">47</div>
          <div class="card-footer"><i class="fas fa-arrow-up"></i> 12% this week</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Compatibility</h3>
            <div class="card-icon">
              <i class="fas fa-percentage"></i>
            </div>
          </div>
          <div class="card-value" id="compatibilityScore">92%</div>
          <div class="card-footer"><i class="fas fa-star"></i> High match potential</div>
        </div>
      </div>
      
      <div class="premium-section">
        <div class="premium-header">
          <h3 class="premium-title">Unlock Premium Features</h3>
          <span class="premium-badge">LIMITED OFFER</span>
        </div>
        <div class="premium-features">
          <div class="premium-feature">
            <i class="fas fa-check-circle"></i>
            <span class="premium-feature-text">See who liked your profile</span>
          </div>
          <div class="premium-feature">
            <i class="fas fa-check-circle"></i>
            <span class="premium-feature-text">Unlimited likes and matches</span>
          </div>
          <div class="premium-feature">
            <i class="fas fa-check-circle"></i>
            <span class="premium-feature-text">Advanced search filters</span>
          </div>
          <div class="premium-feature">
            <i class="fas fa-check-circle"></i>
            <span class="premium-feature-text">Boost your profile visibility</span>
          </div>
        </div>
        <button class="upgrade-btn" id="upgradeBtn">Upgrade Now <i class="fas fa-arrow-right"></i></button>
      </div>
      
      <div class="matches-section">
        <div class="section-header">
          <h3 class="section-title">Your Recent Matches</h3>
          <a href="#" class="view-all">View all <i class="fas fa-chevron-right"></i></a>
        </div>
        
        <div class="matches-grid">
          <div class="match-card new-match" id="matchSarah">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwyY55ckcM_dU1FBg9cmJyPe7sdJ8C8Bp5Dw&s" alt="Match" class="match-image">
            <span class="match-status">NEW</span>
            <div class="match-info">
              <h4 class="match-name">Akshita Sharma <i class="fas fa-check-circle verified-badge"></i></h4>
              <p class="match-details"><i class="fas fa-map-marker-alt"></i> 5 miles away</p>
              <div class="compatibility-bar">
                <div class="compatibility-level" style="width: 92%"></div>
              </div>
            </div>
          </div>
          
          <div class="match-card" id="matchMichael">
            <img src="https://i.imgur.com/8Km9tLL.jpg" alt="Match" class="match-image">
            <div class="match-info">
              <h4 class="match-name">Ananya Patel</h4>
              <p class="match-details"><i class="fas fa-map-marker-alt"></i> 2 miles away</p>
              <div class="compatibility-bar">
                <div class="compatibility-level" style="width: 87%"></div>
              </div>
            </div>
          </div>
          
          <div class="match-card" id="matchJessica">
            <img src="https://scontent.fbom6-1.fna.fbcdn.net/v/t39.30808-1/296486297_363286589298015_3024678215116708906_n.jpg?stp=dst-jpg_s200x200_tt6&_nc_cat=110&ccb=1-7&_nc_sid=2d3e12&_nc_ohc=GRV-lxZzoJgQ7kNvwGt7pjo&_nc_oc=AdlmNF-nx7sOZks_2WT-G6Xfmr95MmsDjTeKLN1ipc0Oz61Ng5dnKmk6q6NBKlwC_rk&_nc_zt=24&_nc_ht=scontent.fbom6-1.fna&_nc_gid=6_Y4uLzLMWs_OzoBdFM0HA&oh=00_AfIuTzn9R7U3tTXFm4xGxh6gGo4EHYchwF-pxXbVB8iEmQ&oe=683E104C" alt="Match" class="match-image">
            <div class="match-info">
              <h4 class="match-name">Priya Verma <i class="fas fa-check-circle verified-badge"></i></h4>
              <p class="match-details"><i class="fas fa-map-marker-alt"></i> 8 miles away</p>
              <div class="compatibility-bar">
                <div class="compatibility-level" style="width: 85%"></div>
              </div>
            </div>
          </div>
          
          <div class="match-card" id="matchDavid">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTD5bbC-Oeu-b1ybkomdDtGdV3VqlMXISOK-g&s" alt="Match" class="match-image">
            <div class="match-info">
              <h4 class="match-name">Sneha Reddy</h4>
              <p class="match-details"><i class="fas fa-map-marker-alt"></i> 12 miles away</p>
              <div class="compatibility-bar">
                <div class="compatibility-level" style="width: 78%"></div>
              </div>
            </div>
          </div>
          
          <div class="match-card" id="vivek">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQy87fuA3EUWhnAfke-jv_TAAFE0BDZxqhJ0ESM6v1XG8UHplMK6kMEsHLYIBYTkUf22ec&usqp=CAU" alt="Match" class="match-image">
            <div class="match-info">
              <h4 class="match-name">Vivek Yadav</h4>
              <p class="match-details"><i class="fas fa-map-marker-alt"></i> 15 miles away</p>
              <div class="compatibility-bar">
                <div class="compatibility-level" style="width: 78%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="traits-section">
        <div class="section-header">
          <h3 class="section-title">Your Personality Traits</h3>
          <a href="#" class="view-all" id="viewInsights">View insights <i class="fas fa-chevron-right"></i></a>
        </div>
        
        <div class="trait-item">
          <div class="trait-header">
            <span class="trait-name">Adventurousness</span>
            <span class="trait-value">85%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-level" style="width: 85%"></div>
          </div>
        </div>
        
        <div class="trait-item">
          <div class="trait-header">
            <span class="trait-name">Romantic</span>
            <span class="trait-value">92%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-level" style="width: 92%"></div>
          </div>
        </div>
        
        <div class="trait-item">
          <div class="trait-header">
            <span class="trait-name">Emotional Intelligence</span>
            <span class="trait-value">78%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-level" style="width: 78%"></div>
          </div>
        </div>
        
        <div class="trait-item">
          <div class="trait-header">
            <span class="trait-name">Communication</span>
            <span class="trait-value">81%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-level" style="width: 81%"></div>
          </div>
        </div>
      </div>
      
      <div class="activity-feed">
        <div class="section-header">
          <h3 class="section-title">Recent Activity</h3>
          <a href="#" class="view-all">View all <i class="fas fa-chevron-right"></i></a>
        </div>
        
        <div class="activity-item">
          <img src="https://scontent.fbom6-1.fna.fbcdn.net/v/t39.30808-6/474760125_913804404246228_1627655707368129870_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=cc71e4&_nc_ohc=sRomCVAaMoEQ7kNvwGTrDl3&_nc_oc=AdnExszf9eRR5pEHFevr8Ht1go2PN-KbpyQkkbQ6ARD6Po-19PZzp6xhJi9XCp-PUWg&_nc_zt=23&_nc_ht=scontent.fbom6-1.fna&_nc_gid=6_Y4uLzLMWs_OzoBdFM0HA&oh=00_AfJoH51KrYCoHZlkMB7nck1Ktex-jXl7anD99GFmNSO98Q&oe=683E1FED" alt="User" class="activity-avatar">
          <div class="activity-content">
            <p class="activity-text"><a href="#">Priya Verma</a> liked your profile</p>
            <p class="activity-time"><i class="far fa-clock"></i> 15 minutes ago</p>
          </div>
        </div>
        
        <div class="activity-item">
          <img src="https://i.imgur.com/8Km9tLL.jpg" alt="User" class="activity-avatar">
          <div class="activity-content">
            <p class="activity-text"><a href="#">Ananya Patel</a> sent you a message</p>
            <p class="activity-time"><i class="far fa-clock"></i> 2 hours ago</p>
          </div>
        </div>
        
        <div class="activity-item">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwyY55ckcM_dU1FBg9cmJyPe7sdJ8C8Bp5Dw&s" alt="User" class="activity-avatar">
          <div class="activity-content">
            <p class="activity-text"><a href="#">Akshita Sharma</a> viewed your profile</p>
            <p class="activity-time"><i class="far fa-clock"></i> 5 hours ago</p>
          </div>
        </div>
        
        <div class="activity-item">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTD5bbC-Oeu-b1ybkomdDtGdV3VqlMXISOK-g&s" alt="User" class="activity-avatar">
          <div class="activity-content">
            <p class="activity-text">You matched with <a href="#">Sneha Reddy</a></p>
            <p class="activity-time"><i class="far fa-clock"></i> Yesterday</p>
          </div>
        </div>

        <div class="activity-item">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQy87fuA3EUWhnAfke-jv_TAAFE0BDZxqhJ0ESM6v1XG8UHplMK6kMEsHLYIBYTkUf22ec&usqp=CAU" alt="User" class="activity-avatar">
          <div class="activity-content">
            <p class="activity-text">You matched with <a href="#">Vivek Yadav</a></p>
            <p class="activity-time"><i class="far fa-clock"></i> Today</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Toggle Button -->
  <div class="chat-toggle" id="chatToggle">
    <i class="fas fa-comment-dots"></i>
    <span class="chat-badge">5</span>
  </div>

  <!-- Floating Action Button -->
  <div class="fab" id="discoverFab">
    <i class="fas fa-plus"></i>
  </div>

  <!-- Chat Container -->
  <div class="chat-container" id="chatContainer">
    <div class="chat-header" id="chatHeader">
      <h3><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTbdeCzKRc48ozVKheV67GX9fuNlsuYrr7_XA&s" alt="Jessica Won"> Priya Verma</h3>
      <button class="chat-close" id="chatClose"><i class="fas fa-times"></i></button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message message-received">
        <div class="message-bubble received">
          Hey there! How's your day going?
        </div>
        <span class="message-time">10:30 AM</span>
      </div>
      <div class="message message-sent">
        <div class="message-bubble sent">
          It's going great! Just finished some work. How about you?
        </div>
        <span class="message-time">10:32 AM</span>
      </div>
      <div class="message message-received">
        <div class="message-bubble received">
          Pretty good! I was thinking about that restaurant you mentioned. Maybe we could check it out this weekend?
        </div>
        <span class="message-time">10:33 AM</span>
      </div>
      <div class="message message-sent">
        <div class="message-bubble sent">
          That sounds perfect! Saturday evening work for you?
        </div>
        <span class="message-time">10:35 AM</span>
      </div>
    </div>
    <div class="chat-input">
      <input type="text" placeholder="Type a message..." id="messageInput">
      <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <!-- Notification Panel -->
  <div class="notification-panel" id="notificationPanel">
    <div class="notification-header">
      <h3 class="notification-title">Notifications</h3>
      <button class="notification-close" id="notificationClose"><i class="fas fa-times"></i></button>
    </div>
    <div class="notification-content">
      <div class="notification-item unread">
        <p class="notification-text"><strong>Priya Verma</strong> liked your profile</p>
        <p class="notification-time">15 minutes ago</p>
      </div>
      <div class="notification-item unread">
        <p class="notification-text"><strong>Ananya Patel</strong> sent you a message</p>
        <p class="notification-time">2 hours ago</p>
      </div>
      <div class="notification-item">
        <p class="notification-text"><strong>Akshita Sharma</strong> viewed your profile</p>
        <p class="notification-time">5 hours ago</p>
      </div>
      <div class="notification-item">
        <p class="notification-text">You matched with <strong>Sneha Reddy</strong></p>
        <p class="notification-time">Yesterday</p>
      </div>
      <div class="notification-item">
        <p class="notification-text">You matched with <strong>Vivek Yadav</strong></p>
        <p class="notification-time">today</p>
      </div>
      <div class="notification-item">
        <p class="notification-text"><strong>Premium feature:</strong> Your profile is being shown to 50% more people this week</p>
        <p class="notification-time">2 days ago</p>
      </div>
    </div>
    <div class="notification-actions">
      <button class="mark-all-read" id="markAllRead">
        <i class="fas fa-check-circle"></i> Mark all as read
      </button>
    </div>
  </div>

  <!-- Dark Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Personality Insights Modal -->
  <div class="modal" id="insightsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Your Personality Insights</h3>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="modal-body">
        <div class="insight-item">
          <h4 class="insight-title">Adventurousness (85%)</h4>
          <p class="insight-text">Your high score in adventurousness suggests you're open to new experiences and enjoy stepping outside your comfort zone. This trait makes you an exciting match for partners who value spontaneity and exploration.</p>
        </div>
        <div class="insight-item">
          <h4 class="insight-title">Romantic (92%)</h4>
          <p class="insight-text">With your strong romantic nature, you likely value emotional connection and meaningful gestures in relationships. This makes you particularly compatible with partners who appreciate deep emotional bonds.</p>
        </div>
        <div class="insight-item">
          <h4 class="insight-title">Emotional Intelligence (78%)</h4>
          <p class="insight-text">Your above-average emotional intelligence indicates good self-awareness and empathy. This helps you navigate relationships effectively and understand your partner's needs.</p>
        </div>
        <div class="insight-item">
          <h4 class="insight-title">Communication (81%)</h4>
          <p class="insight-text">Your strong communication skills suggest you're able to express your thoughts and feelings clearly. This is a valuable trait for building healthy, long-lasting relationships.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn modal-btn-primary" id="closeModal">Got it!</button>
      </div>
    </div>
  </div>

  <!-- Firebase App (modular) -->
  <script type="module">
    // Firebase config
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import {
      getAuth,
      onAuthStateChanged,
      signOut
    } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";
    import { 
      getDatabase, 
      ref, 
      get,
      push,
      onChildAdded
    } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBqhwQzZUbY9n_rDsC1pPumywMj2s1dpvw",
      authDomain: "education-25669.firebaseapp.com",
      databaseURL: "https://education-25669-default-rtdb.firebaseio.com",
      projectId: "education-25669",
      storageBucket: "education-25669.appspot.com",
      messagingSenderId: "621286323419",
      appId: "1:621286323419:web:450c0a4fc2a42cce7008fe",
      measurementId: "G-88NH1PQ6CX"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);

    // DOM Elements
    const chatToggle = document.getElementById('chatToggle');
    const chatContainer = document.getElementById('chatContainer');
    const chatClose = document.getElementById('chatClose');
    const chatMessages = document.getElementById('chatMessages');
    const messageInput = document.getElementById('messageInput');
    const sendMessage = document.getElementById('sendMessage');
    const messagesLink = document.getElementById('messagesLink');
    const notificationBtn = document.getElementById('notificationBtn');
    const notificationPanel = document.getElementById('notificationPanel');
    const notificationClose = document.getElementById('notificationClose');
    const markAllRead = document.getElementById('markAllRead');
    const overlay = document.getElementById('overlay');
    const viewInsights = document.getElementById('viewInsights');
    const insightsModal = document.getElementById('insightsModal');
    const modalClose = document.getElementById('modalClose');
    const closeModal = document.getElementById('closeModal');
    const upgradeBtn = document.getElementById('upgradeBtn');
    const discoverFab = document.getElementById('discoverFab');
    const toggleSidebar = document.getElementById('toggleSidebar');
    const sidebar = document.getElementById('sidebar');
    const searchInput = document.getElementById('searchInput');

    // Toggle sidebar
    toggleSidebar.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
    });

    // Initialize sidebar state based on screen size
    function initSidebar() {
      if (window.innerWidth < 768) {
        sidebar.classList.add('collapsed');
      }
    }
    
    // Call on load and resize
    window.addEventListener('load', initSidebar);
    window.addEventListener('resize', initSidebar);

    // Toggle chat window
    chatToggle.addEventListener('click', () => {
      chatContainer.classList.add('visible');
      chatToggle.style.display = 'none';
      // Scroll to bottom when opening chat
      setTimeout(() => {
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 100);
    });

    chatClose.addEventListener('click', () => {
      chatContainer.classList.remove('visible');
      chatToggle.style.display = 'flex';
    });

    messagesLink.addEventListener('click', (e) => {
      e.preventDefault();
      chatContainer.classList.add('visible');
      chatToggle.style.display = 'none';
    });

    // Handle sending messages
    sendMessage.addEventListener('click', sendMessageHandler);
    messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessageHandler();
      }
    });

    function sendMessageHandler() {
      const message = messageInput.value.trim();
      if (message) {
        // In a real app, you would save to Firebase database
        addMessageToChat(message, 'sent');
        messageInput.value = '';
        
        // Simulate reply after 1-3 seconds
        setTimeout(() => {
          const replies = [
            "That's interesting!",
            "Tell me more about that.",
            "I'd love to meet up soon!",
            "What are you up to this weekend?",
            "Sounds great! 😊"
          ];
          const randomReply = replies[Math.floor(Math.random() * replies.length)];
          addMessageToChat(randomReply, 'received');
        }, 1000 + Math.random() * 2000);
      }
    }

    function addMessageToChat(message, type) {
      const now = new Date();
      const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      const messageDiv = document.createElement('div');
      messageDiv.className = `message message-${type === 'sent' ? 'sent' : 'received'}`;
      
      messageDiv.innerHTML = `
        <div class="message-bubble ${type}">
          ${message}
        </div>
        <span class="message-time">${timeString}</span>
      `;
      
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // Update unread count if message is received
      if (type === 'received') {
        updateUnreadCount(1);
      }
    }

    function updateUnreadCount(change) {
      const unreadElement = document.getElementById('unreadMessages');
      const currentCount = parseInt(unreadElement.textContent) || 0;
      const newCount = Math.max(0, currentCount + change);
      unreadElement.textContent = newCount;
      
      // Update badge
      const badge = document.querySelector('.chat-badge');
      badge.textContent = newCount;
      badge.style.display = newCount > 0 ? 'flex' : 'none';
      
      // Update nav link indicator
      const messageIndicator = document.querySelector('.nav-link .new-message');
      messageIndicator.style.display = newCount > 0 ? 'inline-block' : 'none';
    }

    // Notification panel functionality
    notificationBtn.addEventListener('click', () => {
      notificationPanel.classList.add('open');
      overlay.classList.add('active');
    });

    notificationClose.addEventListener('click', () => {
      notificationPanel.classList.remove('open');
      overlay.classList.remove('active');
    });

    markAllRead.addEventListener('click', () => {
      document.querySelectorAll('.notification-item.unread').forEach(item => {
        item.classList.remove('unread');
      });
      // Update notification badge
      document.querySelector('.notification-badge').textContent = '0';
    });

    overlay.addEventListener('click', () => {
      notificationPanel.classList.remove('open');
      insightsModal.style.display = 'none';
      overlay.classList.remove('active');
    });

    // Personality insights modal
    viewInsights.addEventListener('click', (e) => {
      e.preventDefault();
      insightsModal.style.display = 'flex';
      overlay.classList.add('active');
    });

    modalClose.addEventListener('click', () => {
      insightsModal.style.display = 'none';
      overlay.classList.remove('active');
    });

    closeModal.addEventListener('click', () => {
      insightsModal.style.display = 'none';
      overlay.classList.remove('active');
    });

    // Upgrade button
    upgradeBtn.addEventListener('click', () => {
      alert('Premium upgrade screen would appear here in a real application!');
    });

    // Discover FAB
    discoverFab.addEventListener('click', () => {
      alert('Discover new matches feature would appear here!');
    });

    // Search functionality
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      if (searchTerm.length > 2) {
        // In a real app, you would search your database
        console.log('Searching for:', searchTerm);
      }
    });

    // Match card click handlers
    document.getElementById('matchSarah').addEventListener('click', () => {
      openChatWithUser('Akshita Sharma', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwyY55ckcM_dU1FBg9cmJyPe7sdJ8C8Bp5Dw&s');
    });

    document.getElementById('matchMichael').addEventListener('click', () => {
      openChatWithUser('Ananya Patel', 'https://i.imgur.com/8Km9tLL.jpg');
    });

    document.getElementById('matchJessica').addEventListener('click', () => {
      openChatWithUser('Priya Verma', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTbdeCzKRc48ozVKheV67GX9fuNlsuYrr7_XA&s');
    });

    document.getElementById('matchDavid').addEventListener('click', () => {
      openChatWithUser('Sneha Reddy', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTD5bbC-Oeu-b1ybkomdDtGdV3VqlMXISOK-g&s');
    });
    
    document.getElementById('vivek').addEventListener('click', () => {
      openChatWithUser('Vivek Yadav', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQy87fuA3EUWhnAfke-jv_TAAFE0BDZxqhJ0ESM6v1XG8UHplMK6kMEsHLYIBYTkUf22ec&usqp=CAU');
    });

    function openChatWithUser(name, image) {
      const chatHeader = document.querySelector('.chat-header h3');
      chatHeader.innerHTML = `<img src="${image}" alt="${name}"> ${name}`;
      chatContainer.classList.add('visible');
      chatToggle.style.display = 'none';
      
      // Clear and add some sample messages
      chatMessages.innerHTML = '';
      const greetings = [
        `Hi ${name.split(' ')[0]}! How are you?`,
        `It's great to match with you!`,
        `What are your plans for this weekend?`
      ];
      
      greetings.forEach((msg, i) => {
        setTimeout(() => {
          addMessageToChat(msg, i % 2 === 0 ? 'received' : 'sent');
        }, i * 800);
      });
    }

    // Check authentication state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in
        document.getElementById('userEmail').textContent = user.email;
        document.getElementById('userName').textContent = user.displayName || user.email.split('@')[0];
        
        // Set avatar if available
        if (user.photoURL) {
          document.getElementById('userAvatar').src = user.photoURL;
        } else {
          // Generate default avatar
          const name = user.displayName || user.email.split('@')[0];
          const canvas = document.createElement('canvas');
          canvas.width = 50;
          canvas.height = 50;
          const ctx = canvas.getContext('2d');
          
          // Generate random color based on name
          const colors = ['#ff4d6d', '#ff8fa3', '#ffb3c1', '#ffccd5'];
          const color = colors[name.charCodeAt(0) % colors.length];
          
          // Draw avatar
          ctx.fillStyle = color;
          ctx.fillRect(0, 0, 50, 50);
          ctx.fillStyle = 'white';
          ctx.font = '20px Arial';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(name.charAt(0).toUpperCase(), 25, 25);
          
          document.getElementById('userAvatar').src = canvas.toDataURL();
        }
        
        // Load user data from Realtime Database
        const userRef = ref(database, 'users/' + user.uid);
        get(userRef).then((snapshot) => {
          if (snapshot.exists()) {
            const userData = snapshot.val();
            // Update dashboard metrics if they exist in database
            if (userData.newMatches) document.getElementById('newMatches').textContent = userData.newMatches;
            if (userData.unreadMessages) {
              document.getElementById('unreadMessages').textContent = userData.unreadMessages;
              document.querySelector('.chat-badge').textContent = userData.unreadMessages;
              document.querySelector('.chat-badge').style.display = userData.unreadMessages > 0 ? 'flex' : 'none';
              document.querySelector('.nav-link .new-message').style.display = userData.unreadMessages > 0 ? 'inline-block' : 'none';
            }
            if (userData.profileViews) document.getElementById('profileViews').textContent = userData.profileViews;
            if (userData.compatibilityScore) document.getElementById('compatibilityScore').textContent = userData.compatibilityScore + '%';
          }
        }).catch((error) => {
          console.error("Error loading user data:", error);
        });
        
      } else {
        // Not logged in — redirect to login
        window.location.href = "index.html";
      }
    });

    // Logout function
    function logout() {
      signOut(auth).then(() => {
        window.location.href = "https://shani665.github.io/date/index.html";
      });
    }

    document.getElementById('logoutBtn').addEventListener('click', logout);
    
    // Add pulse animation to new match cards
    setInterval(() => {
      const newMatchCards = document.querySelectorAll('.new-match');
      newMatchCards.forEach(card => {
        card.style.animation = 'pulse 1.5s infinite';
      });
    }, 100);

    // Simulate real-time updates
    setInterval(() => {
      // Randomly update metrics
      const metrics = ['newMatches', 'profileViews', 'unreadMessages'];
      const metric = metrics[Math.floor(Math.random() * metrics.length)];
      const element = document.getElementById(metric);
      if (element) {
        const currentValue = parseInt(element.textContent) || 0;
        const change = Math.random() > 0.5 ? 1 : -1;
        const newValue = Math.max(0, currentValue + change);
        element.textContent = newValue;
        
        // Update badges if it's the unread messages
        if (metric === 'unreadMessages') {
          document.querySelector('.chat-badge').textContent = newValue;
          document.querySelector('.chat-badge').style.display = newValue > 0 ? 'flex' : 'none';
          document.querySelector('.nav-link .new-message').style.display = newValue > 0 ? 'inline-block' : 'none';
        }
      }
    }, 10000);
  </script>
</body>
</html>